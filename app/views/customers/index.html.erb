<% provide(:title, 'Customers') %>

<div class="row">
 <div class="col-md-8 col-md-offset-2">

<div class="row">
<div class="col-lg-6">
<form accept-charset="UTF-8" action="/users/<%= current_user.id %>/customers" method="get" id="customers_search">
<div class="input-group">
  <input type="text" class="form-control" placeholder="Search customer..." name="search">
  <span class="input-group-btn">
    <button class="btn btn-default" type="submit"><span class="glyphicon glyphicon-search" aria-hidden="true"></span> Search</button>
  </span>
</div>
</div>
</div>

<table class="table table-hover table-align customer-table">
  <thead>
    <tr>
      <th width ="110">Name</th>
      <th width ="150">Number of Orders</th>
      <th width ="300">Member since</th>
      <th width ="100">Action</th>
    </tr>
    </thead>

    <tbody>
    <% @customers.each do |customer| %>
      <tr>
        <td><%= customer.name.try(:titleize) %></td>
        <td><%= customer.orders.count %></td>
        <td><%= customer.created_at.try(:strftime, "%B %d, %Y") %></td>
        <td><%= link_to "View detail", user_customer_path(current_user, customer.id), target: "_blank" %></td>
      </tr>
    <% end %>
    </tbody>
</table>

</div>
</div>
